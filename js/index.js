"use strict";var control,len,dataList,timer,root=window.player,audio=root.audioManager,bindEvent=function(){$("body").on("play:change",function(t,o){audio.getAudio(dataList[o].audio),root.render(dataList[o]),root.pro.renderAllTime(dataList[o].duration),"play"==audio.status&&(audio.play(),rotated(0)),$(".img-box").attr("data-deg",0),$(".img-box").css({transform:"rotateZ(0deg)",transition:"none"})}),$(".like").on("click",function(){$(".like").toggleClass("liking")}),$(".prev").on("click",function(){var t=control.prev();$("body").trigger("play:change",t),root.pro.start(0),"pause"==audio.status&&root.pro.stop(0)}),$(".next").on("click",function(){var t=control.next();$("body").trigger("play:change",t),root.pro.start(0),"pause"==audio.status&&root.pro.stop(0)}),$(".play").on("click",function(){if("pause"==audio.status){audio.play(),root.pro.start();var t=$(".img-box").attr("data-deg");rotated(t)}else audio.pause(),root.pro.stop(),clearInterval(timer);$(".play").toggleClass("playing")}),$(".list").on("click",function(){root.listmenu(dataList,len)})},bindTouch=function(){var t=$(".spot"),o=$(".pro-bottom").offset(),n=o.left,r=o.width;t.on("touchstart",function(){root.pro.stop()}).on("touchmove",function(t){var o=(t.changedTouches[0].clientX-n)/r;0<=o&&o<=1&&root.pro.updata(o)}).on("touchend",function(t){var o=(t.changedTouches[0].clientX-n)/r;if(0<=o&&o<=1){var a=o*dataList[control.index].duration;root.pro.start(o),audio.playTo(a),audio.play(),audio.status="play",$(".play").addClass("playing")}})},getData=function(t){$.ajax({type:"GET",url:t,success:function(t){len=t.length,control=new root.indexControl(len),dataList=t,bindEvent(),bindTouch(),$("body").trigger("play:change",0)},error:function(){}})},rotated=function(t){clearInterval(timer),t=+t,timer=setInterval(function(){t++,$(".img-box").attr("data-deg",t),$(".img-box").css({transform:"rotateZ("+t+"deg)",transition:"all 1s ease-out"})},16)};getData("../mock/data.json");